# 구현 체크리스트

> 🌐 **Language**: [English](IMPLEMENTATION_CHECKLIST.md) | [한국어](#)

이 문서는 macOS 블랙박스 플레이어 프로젝트 구현을 위한 상세한 체크리스트를 제공합니다. 작업을 완료할 때마다 체크하여 진행 상황을 추적하세요.

**타임라인**: 12-16주 (3-4개월)
**최종 업데이트**: 2025-10-11

---

## 진행 상황 개요

```
단계 0: 준비                [█████████░] 11/15 작업  (1주차) ✓ EXT4 인터페이스 준비 완료
단계 1: 파일 시스템 및 데이터 [█░░░░░░░░] 3/24 작업   (2-4주차) ✓ 프로토콜 계층 완료
단계 2: 단일 채널 재생       [████████░] 18/22 작업  (5-7주차) ✓ 비디오 재생 완료
단계 3: 다채널 동기화        [████████░] 17/21 작업  (8-10주차) ✓ 멀티 채널 렌더링 완료
단계 4: 추가 기능           [ ] 0/18 작업   (11-12주차)
단계 5: 내보내기 및 설정     [ ] 0/16 작업   (13-14주차)
단계 6: 현지화 및 마무리     [ ] 0/20 작업   (15-16주차)
─────────────────────────────────────────────────────
전체 진행률                 [███░░░░░░░] 49/136 작업 (36.0%)
```

---

## 단계 0: 준비 (1주차)

**목표**: 개발 환경 설정 및 기술적 실현 가능성 검증

### 환경 설정

- [x] Mac App Store에서 Xcode 15+ 설치 (26.0.1 installed)
- [x] Homebrew 패키지 관리자 설치 (4.6.11 installed)
  ```bash
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  ```
- [x] 개발 도구 설치 (FFmpeg 8.0, Git LFS 3.7.0, SwiftLint 0.61.0)
  ```bash
  brew install ffmpeg cmake git git-lfs swiftlint
  ```
- [x] Xcode 명령줄 도구 설치
  ```bash
  xcode-select --install
  ```
- [ ] Apple Developer 계정 생성/확인 (사용자가 직접 수행 필요)
- [ ] Xcode에서 코드 서명 인증서 구성 (사용자가 직접 수행 필요)

### 프로젝트 초기화

- [x] 새 Xcode 프로젝트 생성 (xcodegen 사용)
  - 템플릿: macOS App
  - 인터페이스: SwiftUI
  - 언어: Swift
  - 최소 배포 대상: macOS 12.0
- [x] 프로젝트 폴더 구조 설정
  ```
  BlackboxPlayer/
  ├── App/
  ├── Views/
  ├── ViewModels/
  ├── Services/
  ├── Models/
  ├── Utilities/
  ├── Resources/
  └── Tests/
  ```
- [x] Xcode용 .gitignore 구성
- [x] 초기 커밋으로 Git 저장소 설정
- [x] CI/CD 파이프라인 구성 (GitHub Actions)

### 라이브러리 통합

- [ ] 벤더로부터 EXT4 C/C++ 라이브러리 획득 (외부 의존성)
- [x] Objective-C++ 브리징 헤더 생성 (BridgingHeader.h)
- [x] EXT4 파일시스템 프로토콜 인터페이스 설계 (EXT4FileSystemProtocol)
- [x] 개발용 Mock EXT4 파일시스템 구현 (MockEXT4FileSystem)
- [x] 향후 C 라이브러리 통합을 위한 EXT4Bridge 스텁 생성
- [x] EXT4 인터페이스 포괄적인 단위 테스트 작성 (22개 테스트 통과)
- [x] C 라이브러리 통합 가이드 문서화 (EXT4_INTEGRATION_GUIDE.md)
- [ ] 실제 C 라이브러리로 기본 EXT4 읽기 작업 테스트 (라이브러리 필요)
- [ ] EXT4 라이브러리 macOS 호환성 확인 (라이브러리 필요)
- [x] 프로젝트에 FFmpeg 라이브러리 링크 (project.yml 설정 완료)
- [ ] 기본 FFmpeg Swift 래퍼 생성 (Phase 1-2에서 구현 예정)
- [ ] FFmpeg으로 H.264 영상 디코딩 테스트 (Phase 1-2에서 구현 예정)

### 샘플 데이터 수집

- [ ] 블랙박스에서 샘플 SD 카드 획득
- [ ] SD 카드 파일 구조 문서화
- [ ] 메타데이터 포맷 추출 및 문서화
- [ ] GPS 데이터 샘플 추출
- [ ] G-센서 데이터 샘플 추출
- [ ] 영상 사양 문서화 (해상도, 코덱, 비트레이트, fps)

### 개념 증명

- [ ] 최소한의 EXT4 파일 읽기 데모 생성
- [ ] 최소한의 FFmpeg H.264 디코딩 데모 생성
- [ ] SwiftUI에서 단일 디코딩된 프레임 표시
- [ ] 하드웨어 성능 검증 (5개 스트림 동시 디코딩)
- [ ] 기술적 장애물이나 제한사항 문서화

**성공 기준**:
- ✅ EXT4 포맷 SD 카드에서 파일 읽기 가능
- ✅ FFmpeg으로 H.264 영상 디코딩 가능
- ✅ SwiftUI에서 영상 프레임 표시 가능
- ✅ 프로젝트가 오류 없이 빌드됨

---

## 단계 1: 파일 시스템 및 데이터 계층 (2-4주차)

**목표**: EXT4 파일 시스템 액세스 및 메타데이터 파싱 구현

### 1주차: EXT4 통합

#### EXT4 프로토콜 계층 (준비 작업 - 완료 ✓)

- [x] `EXT4FileSystemProtocol` 인터페이스 설계
- [x] 포괄적인 에러 타입 생성 (EXT4Error)
- [x] 데이터 모델 정의 (EXT4FileInfo, EXT4DeviceInfo)
- [x] 테스트용 `MockEXT4FileSystem` 생성
- [x] 통합 예제가 포함된 `EXT4Bridge` 스텁 생성
- [x] 단위 테스트 작성 (마운트, 언마운트, 파일 작업, 성능)
- [x] C 라이브러리 통합 프로세스 문서화

#### EXT4 브리지 구현 (C 라이브러리 대기 중)

- [ ] 벤더로부터 C/C++ 라이브러리 획득
- [ ] `EXT4Wrapper.h` 생성 (Objective-C++ 헤더)
- [ ] `EXT4Wrapper.mm` 생성 (Objective-C++ 구현)
- [ ] C 라이브러리로 `mount(device:)` 메서드 구현
- [ ] C 라이브러리로 `unmount()` 메서드 구현
- [ ] C 라이브러리로 `listFiles(at:)` 메서드 구현
- [ ] C 라이브러리로 `readFile(at:)` 메서드 구현
- [ ] C 라이브러리로 `writeFile(data:to:)` 메서드 구현
- [ ] C 라이브러리 래퍼를 사용하도록 `EXT4Bridge` 업데이트
- [ ] 실제 하드웨어용 단위 테스트 업데이트
- [ ] 실제 SD 카드 하드웨어로 테스트

#### 장치 감지

- [ ] USB 장치 감지 구현 (IOKit)
- [ ] SD 카드용 장치 필터 생성
- [ ] 장치 선택 UI 구현
- [ ] 장치 연결/연결 해제 알림 추가
- [ ] 여러 연결된 SD 카드 처리

### 2주차: 메타데이터 파싱

#### 메타데이터 파서 구현

- [ ] `MetadataParser` 클래스 생성
- [ ] GPS 데이터 포맷 리버스 엔지니어링
- [ ] GPS 데이터 파서 구현
- [ ] G-센서 데이터 포맷 리버스 엔지니어링
- [ ] G-센서 데이터 파서 구현
- [ ] 타임스탬프 파서 구현
- [ ] 채널 정보 파서 구현
- [ ] 데이터 검증 로직 추가
- [ ] 파서 단위 테스트 작성

#### 데이터 모델

- [ ] `VideoFile` 모델 정의 (Identifiable, Codable)
- [ ] `VideoMetadata` 모델 정의
- [ ] `GPSPoint` 모델 정의
- [ ] `AccelerationData` 모델 정의
- [ ] `EventType` enum 정의
- [ ] `ChannelInfo` 모델 정의
- [ ] `CameraPosition` enum 정의
- [ ] 모든 모델에 대한 테스트 픽스처 생성

### 3주차: 파일 관리자 서비스

#### 서비스 구현

- [ ] `FileManagerService` 프로토콜 생성
- [ ] 파일 스캔 로직 구현
- [ ] 이벤트 유형 분류 구현 (일반/충격/주차)
- [ ] 유형별 파일 필터링 구현
- [ ] 검색 기능 구현
- [ ] 파일 캐싱 메커니즘 추가
- [ ] 손상된 파일을 우아하게 처리
- [ ] 통합 테스트 작성

#### 기본 UI

- [ ] `FileListView` 생성 (SwiftUI)
- [ ] `FileRow` 컴포넌트 생성
- [ ] 파일 정보 표시 (이름, 크기, 길이, 날짜)
- [ ] 색상이 있는 이벤트 유형 배지 표시
- [ ] 파일 선택 구현 (단일/다중)
- [ ] 로딩 상태 추가
- [ ] 오류 상태 추가

**성공 기준**:
- ✅ SD 카드를 마운트하고 모든 파일 나열 가능
- ✅ 영상 파일 데이터 읽기 가능
- ✅ GPS 및 G-센서 메타데이터 파싱 가능
- ✅ 이벤트 유형과 함께 파일 목록 올바르게 표시
- ✅ 파일 작업에서 메모리 누수 없음

---

## 단계 2: 단일 채널 영상 재생 (5-7주차)

**목표**: 부드러운 단일 영상 재생 구현

### 1주차: 영상 디코더

#### FFmpeg 통합

- [x] `VideoDecoder` 클래스 생성 ✅ 2025-10-11
- [x] `initialize()` 메서드 구현 ✅ 2025-10-11
- [x] H.264 디코딩 구현 ✅ 2025-10-11
- [x] MP3 음성 디코딩 구현 ✅ 2025-10-11
- [x] 다양한 영상 해상도 처리 ✅ 2025-10-11
- [x] 프레임 버퍼링 구현 (VideoChannel) ✅ 2025-10-11
- [x] 오류 복구 로직 추가 (EAGAIN, EOF 처리) ✅ 2025-10-11
- [x] Swift/C 상호 운용성 수정 (String.withCString) ✅ 2025-10-11
- [ ] 단위 테스트 작성

#### 음성/영상 동기화

- [x] 마스터 클록 구현 (CACurrentMediaTime) ✅ 2025-10-11
- [x] A/V 드리프트 감지 구현 ✅ 2025-10-11
- [x] A/V 드리프트 수정 구현 ✅ 2025-10-11
- [x] 가변 프레임 레이트 처리 ✅ 2025-10-11
- [ ] 다양한 영상 샘플로 테스트

### 2주차: Metal 렌더러

#### Metal 설정

- [x] `MultiChannelRenderer` 클래스 생성 ✅ 2025-10-11
- [x] Metal 장치 및 커맨드 큐 초기화 ✅ 2025-10-11
- [x] 렌더 파이프라인 디스크립터 생성 ✅ 2025-10-11
- [x] 버텍스 셰이더 구현 (Shaders.metal) ✅ 2025-10-11
- [x] 프래그먼트 셰이더 구현 (Shaders.metal) ✅ 2025-10-11
- [x] CVPixelBuffer에서 텍스처 생성 (IOSurface backing) ✅ 2025-10-11
- [x] 렌더 루프 구현 (30fps 목표) ✅ 2025-10-11
- [x] 윈도우 크기 조정 처리 ✅ 2025-10-11
- [ ] 성능 최적화
- [ ] Metal 디버거로 프로파일링

#### 영상 플레이어 뷰

- [x] `MultiChannelPlayerView` 생성 (SwiftUI + MTKView) ✅ 2025-10-11
- [x] 영상 프레임 표시 ✅ 2025-10-11
- [x] 종횡비 처리 (viewport 계산) ✅ 2025-10-11
- [x] 로딩 인디케이터 추가 (BufferingView) ✅ 2025-10-11
- [x] 오류 표시 추가 (DebugLogView) ✅ 2025-10-11

### 3주차: 재생 제어

#### 제어 UI 구현

- [x] `PlayerControlsView` 생성 (MultiChannelPlayerView 내부) ✅ 2025-10-11
- [x] 재생/일시정지 버튼 구현 ✅ 2025-10-11
- [x] 정지 버튼 구현 (Pause로 대체) ✅ 2025-10-11
- [ ] 이전/다음 파일 버튼 구현
- [x] 타임라인 스크러버 생성 ✅ 2025-10-11
- [x] 현재 시간 / 총 길이 표시 ✅ 2025-10-11
- [x] 속도 제어 피커 구현 (0.25x ~ 2.0x) ✅ 2025-10-11
- [ ] 볼륨 슬라이더 구현
- [ ] 전체 화면 버튼 추가

#### 키보드 단축키

- [ ] Space 구현: 재생/일시정지
- [x] 좌/우 구현: ±10초 탐색 (seekBySeconds) ✅ 2025-10-11
- [ ] 위/아래 구현: 볼륨 조절
- [ ] F 구현: 전체 화면 토글
- [ ] ESC 구현: 전체 화면 종료

#### 플레이어 뷰 모델

- [x] `SyncController` 생성 (ObservableObject) ✅ 2025-10-11
- [x] `play()` 메서드 구현 ✅ 2025-10-11
- [x] `pause()` 메서드 구현 ✅ 2025-10-11
- [x] `stop()` 메서드 구현 ✅ 2025-10-11
- [x] `seekToTime(_:)` 메서드 구현 ✅ 2025-10-11
- [x] `playbackSpeed` 속성 구현 ✅ 2025-10-11
- [ ] `setVolume(_:)` 메서드 구현
- [x] UI 바인딩을 위한 @Published 속성 추가 ✅ 2025-10-11
- [ ] 모의 객체로 단위 테스트 작성

**성공 기준**:
- ✅ 영상이 최소 30fps로 재생
- ✅ 음성/영상 동기화 ±50ms 이내
- ✅ 탐색이 500ms 이내에 응답
- ✅ 단일 HD 영상에 대한 메모리 사용량 < 500MB
- ✅ 정상 재생 중 프레임 드롭 없음

---

## 단계 3: 다채널 동기화 (8-10주차)

**목표**: 프레임 완벽 정확도로 5개 채널 동기화

### 1주차: 다채널 아키텍처

#### 채널 관리

- [x] `VideoChannel` 클래스 생성 ✅ 2025-10-11
- [x] 독립적인 디코더 인스턴스 구현 ✅ 2025-10-11
- [x] 각 채널에 대한 프레임 버퍼 생성 (순환 버퍼, 30 프레임) ✅ 2025-10-11
- [x] 백그라운드 디코딩 큐 설정 (DispatchQueue) ✅ 2025-10-11
- [x] 채널 상태 관리 구현 (ChannelState enum) ✅ 2025-10-11
- [x] 채널 오류 처리 추가 (ChannelError) ✅ 2025-10-11
- [ ] 단위 테스트 작성

#### 동기화 컨트롤러

- [x] `SyncController` 클래스 생성 ✅ 2025-10-11
- [x] 마스터 클록 구현 (CACurrentMediaTime) ✅ 2025-10-11
- [x] `play()` 메서드 구현 (모든 채널 동기화) ✅ 2025-10-11
- [x] `pause()` 메서드 구현 ✅ 2025-10-11
- [x] `seekToTime(_:)` 메서드 구현 ✅ 2025-10-11
- [x] 드리프트 모니터링 구현 (updateSync, 30fps) ✅ 2025-10-11
- [x] 드리프트 임계값 설정 (50ms) ✅ 2025-10-11
- [x] 가변 프레임 레이트 처리 ✅ 2025-10-11
- [ ] 동기화 테스트 작성

### 2주차: 다중 텍스처 렌더링

#### Metal 다채널 렌더러

- [x] `MultiChannelRenderer` 클래스 생성 ✅ 2025-10-11
- [x] 단일 패스 다중-텍스처 렌더링 구현 ✅ 2025-10-11
- [x] 그리드 레이아웃 계산기 생성 (자동 행/열 계산) ✅ 2025-10-11
- [x] 포커스 레이아웃 생성 (75% + 25% 썸네일) ✅ 2025-10-11
- [x] 수평 레이아웃 생성 (균등 분할) ✅ 2025-10-11
- [x] 누락된 채널 우아하게 처리 (guard 문) ✅ 2025-10-11
- [x] MTLSamplerState 구성 (linear filtering) ✅ 2025-10-11
- [ ] Metal 디버거로 프로파일링

#### 레이아웃 관리자

- [x] `LayoutMode` enum 생성 ✅ 2025-10-11
- [x] `calculateViewports` 메서드 구현 ✅ 2025-10-11
- [x] `calculateGridViewports` 구현 ✅ 2025-10-11
- [x] `calculateFocusViewports` 구현 ✅ 2025-10-11
- [x] `calculateHorizontalViewports` 구현 ✅ 2025-10-11
- [x] 윈도우 크기 조정 처리 (drawableSize 전달) ✅ 2025-10-11
- [x] 레이아웃 전환 UI 추가 (layoutControls) ✅ 2025-10-11
- [ ] 레이아웃 기본 설정 유지

### 3주차: 성능 최적화

#### 메모리 최적화

- [x] 프레임 버퍼 제한 구현 (채널당 30 프레임) ✅ 2025-10-11
- [x] 오래된 프레임 자동 해제 (1초 이전 프레임 삭제) ✅ 2025-10-11
- [x] 타이트 루프에 autoreleasepool 사용 ✅ 2025-10-11
- [ ] MemoryMonitor로 메모리 사용량 모니터링
- [x] 버퍼 상태 추적 (getBufferStatus) ✅ 2025-10-11
- [ ] Instruments(Allocations)로 테스트

#### 스레딩 최적화

- [x] 전용 디코드 큐 생성 (채널별 DispatchQueue) ✅ 2025-10-11
- [x] 메인 스레드에서 렌더링 보장 (MTKView delegate) ✅ 2025-10-11
- [x] NSLock으로 스레드 안전성 보장 ✅ 2025-10-11
- [x] 스레드 우선순위 설정 (.userInitiated QoS) ✅ 2025-10-11
- [ ] Instruments(Time Profiler)로 프로파일링
- [ ] 컨텍스트 전환 감소

#### GPU 최적화

- [x] 공유 Metal 리소스 사용 (단일 device, commandQueue) ✅ 2025-10-11
- [x] CVMetalTextureCache 활용 ✅ 2025-10-11
- [x] 단일 렌더 패스에 다중 드로우 콜 ✅ 2025-10-11
- [ ] Metal System Trace로 프로파일링
- [ ] 셰이더 성능 최적화

**성공 기준**:
- ✅ 모든 5개 채널이 최소 30fps로 재생
- ✅ 동기화 드리프트 < ±50ms
- ✅ 메모리 사용량 < 2GB
- ✅ Apple Silicon에서 CPU 사용량 < 80%
- ✅ GPU 사용량 < 70%
- ✅ 정상 재생 중 프레임 드롭 없음

---

## 단계 4: 추가 기능 (11-12주차)

**목표**: GPS 매핑, G-센서 시각화 및 이미지 처리 구현

### 1주차: GPS 및 G-센서

#### GPS 통합

- [ ] `GPSService` 클래스 생성
- [ ] `loadGPSData(for:)` 메서드 구현
- [ ] `getCurrentLocation(at:)` 메서드 구현
- [ ] MapKit 프레임워크 통합
- [ ] `GPSMapView` 생성 (NSView + MKMapView)
- [ ] 지도에 경로 그리기 (MKPolyline)
- [ ] 재생 중 위치 마커 업데이트
- [ ] 지도 제어 추가 (줌, 패닝, 중심)
- [ ] 속도 및 고도 정보 표시
- [ ] 단위 테스트 작성

#### G-센서 시각화

- [ ] `GSensorService` 클래스 생성
- [ ] G-센서 데이터 파싱 구현
- [ ] `GSensorChartView` 생성 (NSView + Core Graphics)
- [ ] X/Y/Z 가속도 축 그리기
- [ ] 충격 이벤트 강조 (크기 > 임계값)
- [ ] 영상 재생과 차트 동기화
- [ ] 차트에 대한 줌/패닝 추가
- [ ] 현재 값 표시
- [ ] 단위 테스트 작성

### 2주차: 이미지 처리

#### 화면 캡처

- [ ] `captureCurrentFrame()` 메서드 구현
- [ ] 파일 저장 대화상자 생성
- [ ] PNG 포맷 지원
- [ ] JPEG 포맷 지원
- [ ] 선택적 타임스탬프 오버레이 추가
- [ ] 전체 해상도로 저장
- [ ] 성공/오류 알림 추가

#### 영상 변환

- [ ] `VideoTransformations` 클래스 생성
- [ ] 밝기 조정 구현 (Metal 셰이더)
- [ ] 수평 반전 구현
- [ ] 수직 반전 구현
- [ ] 디지털 줌 구현
- [ ] 변환을 위한 Metal 셰이더 업데이트
- [ ] 변환 제어 UI 추가
- [ ] 변환 설정 유지

#### 전체 화면 모드

- [ ] 전체 화면 진입/종료 구현
- [ ] 전체 화면에서 제어 자동 숨기기
- [ ] 마우스 이동 시 제어 표시
- [ ] 여러 디스플레이 지원
- [ ] 디스플레이 배열 변경 처리

**성공 기준**:
- ✅ GPS 위치가 실시간으로 업데이트
- ✅ G-센서 차트가 부드럽게 렌더링
- ✅ 이미지 캡처가 전체 해상도로 저장
- ✅ 영상 변환이 성능에 영향 없음
- ✅ 전체 화면 모드가 올바르게 작동

---

## 단계 5: 내보내기 및 설정 (13-14주차)

**목표**: MP4 내보내기 및 블랙박스 구성 구현

### 1주차: MP4 내보내기

#### 내보내기 서비스

- [ ] `ExportService` 클래스 생성
- [ ] FFmpeg 먹싱 구현 (H.264 + MP3 → MP4)
- [ ] 채널 선택 지원
- [ ] 메타데이터 포함 (GPS, G-센서)
- [ ] 진행률 추적 구현
- [ ] 취소 지원
- [ ] 배치 내보내기 구현
- [ ] 통합 테스트 작성

#### 영상 복구

- [ ] `repairVideo(_:)` 메서드 구현
- [ ] 손상된 파일 감지
- [ ] 읽을 수 있는 프레임 복구
- [ ] 손상된 섹션 건너뛰기
- [ ] 재생 가능한 MP4 생성
- [ ] 복구 통계 보고

#### 채널 추출

- [ ] `extractChannel(_:channel:)` 메서드 구현
- [ ] 특정 채널 추출
- [ ] 가능한 경우 음성 유지
- [ ] 영상 품질 유지

### 2주차: 설정 관리

#### 설정 서비스

- [ ] `SettingsService` 클래스 생성
- [ ] 설정 파일 포맷 리버스 엔지니어링
- [ ] `loadSettings(from:)` 메서드 구현
- [ ] `saveSettings(_:to:)` 메서드 구현
- [ ] 설정 검증 추가
- [ ] 다른 펌웨어 버전 처리
- [ ] 통합 테스트 작성

#### 설정 UI

- [ ] `SettingsView` 생성 (SwiftUI Form)
- [ ] 영상 섹션 추가 (해상도, 모드)
- [ ] 기능 섹션 추가 (주차 모드, 감도)
- [ ] 음성 섹션 추가
- [ ] 디스플레이 섹션 추가
- [ ] 저장/취소 버튼 구현
- [ ] 저장되지 않은 변경사항 경고 추가
- [ ] 툴팁/도움말 텍스트 추가

**성공 기준**:
- ✅ 5채널 영상을 MP4로 내보내기 가능
- ✅ 내보내기가 품질 유지
- ✅ 복구가 최대한의 프레임 복구
- ✅ 설정이 SD 카드에 올바르게 저장
- ✅ 설정 UI가 직관적

---

## 단계 6: 현지화 및 마무리 (15-16주차)

**목표**: 프로덕션 준비 완료된 애플리케이션

### 1주차: 현지화

#### 문자열 추출

- [ ] 모든 UI 문자열 추출
- [ ] `en.lproj/Localizable.strings` 생성
- [ ] `ko.lproj/Localizable.strings` 생성
- [ ] `ja.lproj/Localizable.strings` 생성 (선택사항)
- [ ] 하드코딩된 문자열을 NSLocalizedString으로 교체
- [ ] 언어 전환 테스트

#### 번역

- [ ] 한국어 번역 완료
- [ ] 영어 번역 완료
- [ ] 일본어 번역 완료 (선택사항)
- [ ] 원어민과 번역 검토
- [ ] 모든 언어에서 UI 레이아웃 테스트

#### 현지화된 에셋

- [ ] 오류 메시지 현지화
- [ ] 도움말 텍스트 현지화
- [ ] 플레이스홀더 텍스트 현지화
- [ ] 알림 메시지 현지화

### 2주차: 마무리 및 패키징

#### UI 마무리

- [ ] 다크 모드 지원 구현
- [ ] 앱 아이콘 디자인 및 추가 (1024x1024)
- [ ] 애니메이션 및 전환 개선
- [ ] 오류 메시지 명확성 향상
- [ ] 모든 곳에 로딩 상태 추가
- [ ] 뷰 간 전환 마무리
- [ ] UI 불일치 검토 및 수정

#### 성능 튜닝

- [ ] Instruments(Time Profiler)로 프로파일링
- [ ] 모든 메모리 누수 수정
- [ ] 앱 시작 시간 최적화 (< 2초)
- [ ] 유휴 상태에서 CPU 사용량 감소
- [ ] 배터리 소모 감소
- [ ] 구형 Mac 하드웨어에서 테스트

#### 접근성

- [ ] 모든 UI 요소에 VoiceOver 레이블 추가
- [ ] 키보드 탐색이 작동하는지 확인
- [ ] 색상 대비 확인 (WCAG AA)
- [ ] Dynamic Type 지원 (텍스트 크기 조정)
- [ ] VoiceOver 활성화하여 테스트

#### 문서화

- [ ] 사용자 매뉴얼 작성 (영어 및 한국어)
- [ ] 설치 가이드 작성
- [ ] 문제 해결 가이드 작성
- [ ] 개발자 문서 작성
- [ ] API 문서 생성 (DocC)

#### 코드 서명 및 공증

- [ ] Xcode에서 코드 서명 구성
- [ ] 모든 프레임워크 및 라이브러리 서명
- [ ] 메인 앱 번들 서명
- [ ] create-dmg로 DMG 설치 프로그램 생성
- [ ] 공증 제출
- [ ] 공증 티켓 스테이플
- [ ] 깨끗한 시스템에서 공증된 앱 테스트

#### 최종 테스트

- [ ] macOS 12 (Monterey)에서 테스트
- [ ] macOS 13 (Ventura)에서 테스트
- [ ] macOS 14 (Sonoma)에서 테스트
- [ ] Intel Mac에서 테스트
- [ ] Apple Silicon Mac에서 테스트
- [ ] 다양한 SD 카드 및 블랙박스로 테스트
- [ ] 모든 중요한 버그 수정
- [ ] 모든 기능이 엔드투엔드로 작동하는지 확인

**성공 기준**:
- ✅ 모든 UI 텍스트가 올바르게 현지화됨
- ✅ 다크 모드가 전문적으로 보임
- ✅ 앱이 Apple 공증 통과
- ✅ DMG가 원활하게 설치됨
- ✅ 중요한 버그가 남아있지 않음
- ✅ 성능이 모든 목표 달성

---

## 테스트 체크리스트

### 단위 테스트 (목표: 80% 커버리지)

- [ ] EXT4Bridge 테스트
- [ ] MetadataParser 테스트
- [ ] FileManagerService 테스트
- [ ] VideoDecoder 테스트
- [ ] PlayerViewModel 테스트
- [ ] ExportService 테스트
- [ ] GPSService 테스트
- [ ] GSensorService 테스트
- [ ] 모든 모델에 테스트 있음

### 통합 테스트

- [ ] 실제 SD 카드로 EXT4 읽기/쓰기
- [ ] 다채널 재생 테스트
- [ ] 다양한 영상 조합으로 내보내기
- [ ] 설정 로드/저장 테스트

### 성능 테스트

- [ ] 재생 FPS 측정
- [ ] 시간 경과에 따른 메모리 사용량
- [ ] 내보내기 속도 측정
- [ ] 앱 시작 시간

### UI 테스트

- [ ] 파일 목록 탐색
- [ ] 재생 제어
- [ ] 설정 폼 검증
- [ ] 내보내기 워크플로우

---

## 릴리스 체크리스트

- [ ] 모든 기능 구현 및 테스트 완료
- [ ] 모든 중요한 버그 수정
- [ ] 문서화 완료
- [ ] 앱 서명 및 공증
- [ ] DMG 설치 프로그램 생성 및 테스트
- [ ] 릴리스 노트 작성
- [ ] App Store 스크린샷 준비 (해당되는 경우)
- [ ] 마케팅 자료 준비
- [ ] 지원 채널 설정
- [ ] 출시 후 모니터링 계획 준비

---

## 참고사항

**성공을 위한 팁**:
- 자주 커밋하기
- 개발하면서 테스트 작성하기
- 정기적으로 성능 프로파일링하기
- 실제 하드웨어에서 자주 테스트하기
- 개발 중 사용자 피드백 받기
- 어려움과 솔루션 문서화하기
- 이 체크리스트를 업데이트하여 유지하기

**피해야 할 일반적인 함정**:
- 오류 처리 생략
- 메모리 누수 무시
- 구형 하드웨어에서 테스트하지 않기
- 문자열 하드코딩 (현지화 깨짐)
- 메인 스레드 차단
- 최적화 전에 프로파일링하지 않기
- 단위 테스트 생략

---

**최종 업데이트**: 2025-10-11
**프로젝트**: macOS용 블랙박스 플레이어
**총 작업**: 136개

---

## 최근 구현 내역 (2025-10-11)

### Phase 2 & 3: 비디오 재생 및 멀티 채널 동기화 완료

#### 핵심 기능 구현
1. **VideoDecoder**: FFmpeg 기반 H.264/MP3 디코딩
   - Swift/C 상호 운용성 수정 (String.withCString)
   - macOS EAGAIN 에러 코드 처리 (-35 vs -11)
   - EOF 감지 및 에러 복구 로직

2. **VideoChannel**: 채널별 독립 디코딩 및 버퍼 관리
   - 백그라운드 디코딩 큐 (DispatchQueue)
   - 순환 버퍼 (30 프레임)
   - 오래된 프레임 자동 삭제 (1초 이전)
   - 채널 상태 관리 (ChannelState enum)

3. **SyncController**: 멀티 채널 동기화 컨트롤러
   - 마스터 클록 (CACurrentMediaTime)
   - 드리프트 모니터링 및 수정 (±50ms)
   - NSLock 기반 스레드 안전성
   - 재생 속도 제어 (0.25x ~ 2.0x)

4. **MultiChannelRenderer**: Metal 기반 GPU 렌더링
   - IOSurface backing을 사용한 Metal 호환 CVPixelBuffer
   - 3가지 레이아웃 모드 (Grid/Focus/Horizontal)
   - CVMetalTextureCache 최적화
   - MTLSamplerState 구성

5. **MultiChannelPlayerView**: SwiftUI + Metal 통합
   - MTKView delegate 패턴
   - 재생 제어 UI (Play/Pause/Seek/Speed)
   - 타임라인 스크러버
   - 레이아웃 전환 UI

6. **디버그 시스템**: 통합 로그 관리
   - LogManager (스레드 안전)
   - DebugLogView (실시간 로그 표시)
   - 로그 복사 기능
   - 로그 레벨 색상 구분

#### 해결된 기술적 문제
1. **Metal 텍스처 생성 실패 (-6660 에러)**
   - 원인: CVPixelBuffer에 IOSurface backing 없음
   - 해결: kCVPixelBufferMetalCompatibilityKey 및 kCVPixelBufferIOSurfacePropertiesKey 추가

2. **버퍼 가득 참으로 인한 재생 멈춤**
   - 원인: getFrame()이 프레임을 제거하지 않아 버퍼 정체
   - 해결: 1초 이전 프레임 자동 삭제 로직 추가

3. **Dictionary.Keys 스레드 경쟁 조건**
   - 원인: Metal 렌더 스레드와 UI 스레드 간 동시 접근
   - 해결: NSLock 및 sorted array 복사본 사용

4. **VideoDecoder 크래시**
   - 원인: filePath.cString(using:) 메모리 조기 해제
   - 해결: filePath.withCString 사용

#### 현재 상태
- ✅ 비디오 로딩 및 디코딩 완료
- ✅ Metal 렌더링 작동
- ✅ 멀티 채널 동기화 구현
- ✅ 재생 제어 UI 완료
- ⏳ 버퍼 관리 최적화 진행 중
- ⏳ 최종 성능 검증 대기 중

#### 다음 단계
1. 비디오 재생 안정성 최종 검증
2. 멀티 채널 동기화 정밀도 테스트
3. Metal 성능 프로파일링 (Instruments)
4. 파일 시스템 통합 (EXT4)
5. GPS/G-센서 데이터 시각화
